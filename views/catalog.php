<main class="center">
    <aside>
        <details class="side-menu">
            <summary>category</summary>
            <ul>
                <li class="side-menu__list"><a href="#" class="side-menu__link">Accessories</a></li>
                <li class="side-menu__list"><a href="#" class="side-menu__link">Bags</a></li>
                <li class="side-menu__list"><a href="#" class="side-menu__link">Denim</a></li>
                <li class="side-menu__list"><a href="#" class="side-menu__link">Hoodies & Sweatshirts</a></li>
                <li class="side-menu__list"><a href="#" class="side-menu__link">Jackets & Coats</a></li>
                <li class="side-menu__list"><a href="#" class="side-menu__link">Pants</a></li>
                <li class="side-menu__list"><a href="#" class="side-menu__link">Polos</a></li>
                <li class="side-menu__list"><a href="#" class="side-menu__link">Shirts</a></li>
                <li class="side-menu__list"><a href="#" class="side-menu__link">Shoes</a></li>
                <li class="side-menu__list"><a href="#" class="side-menu__link">Shorts</a></li>
                <li class="side-menu__list"><a href="#" class="side-menu__link">Sweaters & Knits</a></li>
                <li class="side-menu__list"><a href="#" class="side-menu__link">T-Shirts</a></li>
                <li class="side-menu__list"><a href="#" class="side-menu__link">Tanks</a></li>
            </ul>
        </details>
        <details class="side-menu">
            <summary>brand</summary>
            <ul>
                <li class="side-menu__list"><a href="#" class="side-menu__link">Accessories</a></li>
                <li class="side-menu__list"><a href="#" class="side-menu__link">Bags</a></li>
                <li class="side-menu__list"><a href="#" class="side-menu__link">Denim</a></li>
                <li class="side-menu__list"><a href="#" class="side-menu__link">Hoodies & Sweatshirts</a></li>
                <li class="side-menu__list"><a href="#" class="side-menu__link">Jackets & Coats</a></li>
                <li class="side-menu__list"><a href="#" class="side-menu__link">Pants</a></li>
                <li class="side-menu__list"><a href="#" class="side-menu__link">Polos</a></li>
                <li class="side-menu__list"><a href="#" class="side-menu__link">Shirts</a></li>
                <li class="side-menu__list"><a href="#" class="side-menu__link">Shoes</a></li>
                <li class="side-menu__list"><a href="#" class="side-menu__link">Shorts</a></li>
                <li class="side-menu__list"><a href="#" class="side-menu__link">Sweaters & Knits</a></li>
                <li class="side-menu__list"><a href="#" class="side-menu__link">T-Shirts</a></li>
                <li class="side-menu__list"><a href="#" class="side-menu__link">Tanks</a></li>
            </ul>
        </details>
        <details class="side-menu">
            <summary>designer</summary>
            <ul>
                <li class="side-menu__list"><a href="#" class="side-menu__link">Accessories</a></li>
                <li class="side-menu__list"><a href="#" class="side-menu__link">Bags</a></li>
                <li class="side-menu__list"><a href="#" class="side-menu__link">Denim</a></li>
                <li class="side-menu__list"><a href="#" class="side-menu__link">Hoodies & Sweatshirts</a></li>
                <li class="side-menu__list"><a href="#" class="side-menu__link">Jackets & Coats</a></li>
                <li class="side-menu__list"><a href="#" class="side-menu__link">Pants</a></li>
                <li class="side-menu__list"><a href="#" class="side-menu__link">Polos</a></li>
                <li class="side-menu__list"><a href="#" class="side-menu__link">Shirts</a></li>
                <li class="side-menu__list"><a href="#" class="side-menu__link">Shoes</a></li>
                <li class="side-menu__list"><a href="#" class="side-menu__link">Shorts</a></li>
                <li class="side-menu__list"><a href="#" class="side-menu__link">Sweaters & Knits</a></li>
                <li class="side-menu__list"><a href="#" class="side-menu__link">T-Shirts</a></li>
                <li class="side-menu__list"><a href="#" class="side-menu__link">Tanks</a></li>
            </ul>
        </details>

    </aside>
    <div class="main-content">
        <div class="main-content__filter">
            <div class="filter__top">
                <div class="trending">
                    <h2 class="filter__top__title">trending now</h2>
                    <ul>
                        <li class="filter__list"><a href="#" class="filter__link">Bohemian</a></li>
                        <li class="filter__list"><a href="#" class="filter__link">Floral</a></li>
                        <li class="filter__list"><a href="#" class="filter__link">Lace</a></li>
                        <li class="filter__list"><a href="#" class="filter__link">Floral</a></li>
                        <li class="filter__list"><a href="#" class="filter__link">Lace</a></li>
                        <li class="filter__list"><a href="#" class="filter__link">Bohemian</a></li>
                    </ul>
                </div>
                <div class="size">
                    <h2 class="filter__top__title">size</h2>
                    <div class="filter__checkbox">
                        <label><input type="checkbox"> XXS</label>
                        <label><input type="checkbox"> XS</label>
                        <label><input type="checkbox"> S</label>
                        <label><input type="checkbox"> M</label>
                        <label><input type="checkbox"> L</label>
                        <label><input type="checkbox"> xl</label>
                        <label><input type="checkbox"> XXL</label>
                    </div>
                </div>
                <div class="price">
                    <h2 class="filter__top__title">price</h2>
                    <div class="price-selector"></div>
                    <div class="price-value">
                        <span>$52</span>
                        <span>$400</span>
                    </div>
                </div>
            </div>
            <div class="filter__bottom">
                <div class="sort">
                    <span>Sort By</span>
                    <details>
                        <summary>Name</summary>
                        <ul class="filter-drop">
                            <li><a href="#">T-SHIRT</a></li>
                            <li><a href="#">T-SHIRT</a></li>
                            <li><a href="#">T-SHIRT</a></li>
                        </ul>
                    </details>
                </div>
                <div class="show">
                    <span>Show</span>
                    <details>
                        <summary>09</summary>
                        <ul class="filter-drop">
                            <li><a href="#">3</a></li>
                            <li><a href="#">6</a></li>
                            <li><a href="#">9</a></li>
                        </ul>
                    </details>
                </div>
            </div>
        </div>
        <div class="product-box center">
            <div class="product-box__list">
                <?php foreach ($catalog as $item):?>
                    <div class="product" id="catalogField">
                        <a href="/product/card/?id=<?=$item['id']?>" class="product__img">
                            <img src="<?=IMAGES_DIR . $item['image'];?>" alt="img">
                        </a>
                        <div class="product__content">
                            <a href="#" class="product__name"><?=$item['name']?></a>
                            <p class="product__price">$<?=$item['price']?><span class="product__star">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                    </span>
                            </p>
                        </div>
                        <div class="product__add">
                            <button data-id="<?=$item['id']?>" class="product__add-button buy">Add to Cart</button>
                        </div>

<!--                        <a class="product__add" href="/basket/add/?id=--><?//=$item['id']?><!--">Add to Cart</a>-->
<!--                        <form class="product__add" action="/basket/add/" method="post">-->
<!--                            <input type="text" name="id" value="--><?//=$item['id']?><!--" hidden>-->
<!--                            <button data-id="--><?//=$item['id']?><!--" class="product__add-button buy" type="submit">Add to Cart</button>-->
<!--                        </form>-->
                    </div>
                <?php endforeach;?>
            </div>
        </div>
        <div class="main-content__pagination">
            <div class="pagination-button">
                <a href="/product/catalog/?page=<?=$page?>">View more</a>

            </div>
            <button class="showMore" id="showMore">Show more</button>
        </div>
    </div>
</main>
<div class="product-feature center">
    <div class="feature__box product-feature__box">
        <div class="feature__box__content">
            <img src="/img/icons/Forma_1.png" alt="icon">
            <h2>Free Delivery</h2>
            <p>Worldwide delivery on&nbsp;all. Authorit tively morph next-generation innov tion with extensive models.</p>
        </div>

    </div>
    <div class="feature__box product-feature__box">
        <div class="feature__box__content">
            <img src="/img/icons/Forma_2.png" alt="icon">
            <h2>Sales & discounts</h2>
            <p>Worldwide delivery on&nbsp;all. Authorit tively morph next-generation innov tion with extensive models.</p>
        </div>
    </div>
    <div class="feature__box product-feature__box">
        <div class="feature__box__content">
            <img src="/img/icons/Forma_3.png" alt="icon">
            <h2>Quality assurance</h2>
            <p>Worldwide delivery on&nbsp;all. Authorit tively morph next-generation innov tion with extensive models.</p>
        </div>
    </div>
</div>
<script>

    let buttons = document.querySelectorAll('.buy');

    buttons.forEach((elem) => {

        elem.addEventListener('click', () => {
            let product_id = elem.getAttribute('data-id');

            (
                async () => {
                    const response = await fetch('/basket/add/', {
                        method: 'POST',
                        headers: {'Content-Type': 'application/json;charset=utf-8'},
                        body: JSON.stringify({
                            id: product_id
                        })
                    });
                    const answer = await response.json();
                    console.log(answer);
                    document.getElementById('cartCount').innerText = answer.count;
                }
                )();

        });

    });
</script>